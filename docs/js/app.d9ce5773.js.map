{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home.vue?da68","webpack:///./src/App.vue?146a","webpack:///./src/App.vue?bff9","webpack:///./src/registerServiceWorker.js","webpack:///./src/views/Home.vue?81c7","webpack:///./src/raytracer/shader.js","webpack:///./src/raytracer/shaders/shader.frag","webpack:///./src/raytracer/shaders/shader.vert","webpack:///./src/raytracer/raytracer.js","webpack:///./src/raytracer/index.js","webpack:///./src/helpers/clone.js","webpack:///./src/raytracer/scene.js","webpack:///./src/raytracer/movie.js","webpack:///./src/raytracer/movies/rectangle-movie.js","webpack:///./src/raytracer/movies/circle-movie.js","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue?c853","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?c650"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","component","register","process","ready","log","registered","cached","updatefound","updated","offline","staticClass","_v","_m","_l","movie","index","id","params","_s","Shader","gl","vsSource","fsSource","sourceVars","preprocessSource","program","initShaderProgram","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","getProgramInfoLog","source","sourceVarPattern","replace","_","varName","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","useProgram","uniform1f","getUniformLocation","uniformMatrix4fv","uniform2fv","uniform3fv","getAttribLocation","deleteProgram","Raytracer","shaderSourceVars","buffers","initBuffers","delete","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","positions","bufferData","Float32Array","STATIC_DRAW","position","scene","clearColor","clear","COLOR_BUFFER_BIT","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","DEPTH_BUFFER_BIT","fieldOfView","Math","PI","aspect","canvas","clientWidth","clientHeight","zNear","zFar","projectionMatrix","mat4","perspective","modelViewMatrix","translate","vertexPositionLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","use","setLightUniforms","setCircleUniforms","setRectUniforms","setUniformMatrix4fv","offset","vertexCount","drawArrays","TRIANGLE_STRIP","lights","entries","light","setUniform2fv","setUniform3fv","color","circles","circle","setUniform1f","radius","rectangles","rect","width","height","angle","clone","instance","assign","getPrototypeOf","JSON","parse","stringify","Scene","nextScene","linear","interpolatedScene","sin","forEach","rectangle","Movie","lightCount","circleCount","rectangleCount","LIGHT_COUNT","CIRCLE_COUNT","RECTANGLE_COUNT","lastScene","addLight","addCircle","addRectangle","scenes","map","duration","sceneDurations","reduce","d0","d1","time","sceneCount","timeSum","sceneIndex","scene0","scene1","normalizedTime","interpolate","rectangleMovie","brightness","spacing","sideDimension","combinedWidth","x","y","addScene","pointBetweenRects","circleMovie","frameId","startTime","raytracer","movies","watch","$route","playMovie","props","Number","methods","cancelAnimationFrame","now","requestAnimationFrame","render","Vue","VueRouter","routes","path","redirect","Home","route","router","base","Vuex","Store","state","mutations","actions","config","productionTip","store","h","App","$mount"],"mappings":"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","file":"js/app.d9ce5773.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"f7b116dc\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/infogr-raytracer-webgl/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=c1197a7e&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('h1',[_vm._v(\"INFOGR Raytracer WebGL\")]),_vm._m(0),_c('div',{staticClass:\"tablink-container\"},_vm._l((_vm.movies),function(movie,index){return _c('router-link',{key:movie.id,staticClass:\"tablink\",attrs:{\"to\":{name: 'Movie', params: {id: index}}}},[_vm._v(_vm._s(movie.id))])}),1),_c('canvas',{attrs:{\"id\":\"glCanvas\",\"width\":\"800\",\"height\":\"800\"}}),_vm._m(1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',[_c('a',{attrs:{\"href\":\"https://github.com/cor\"}},[_vm._v(\"cor\")]),_vm._v(\" & \"),_c('a',{attrs:{\"href\":\"https://github.com/kaiserkarel\"}},[_vm._v(\"kaiserkarel\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"description\"},[_c('p',[_vm._v(\" Above you will find two movies; which are actively ray traced withn a WebGL fragment shader. The tracer operates in two dimensions, shooting a ray at each pixel every single frame. WebGL is easily capable of performing this operation at 60fps, as opposed to traditional CPU implementations. Our CPU-based \"),_c('a',{attrs:{\"href\":\"https://github.com/cor/infogr-raytracer\"}},[_vm._v(\"C# version\")]),_vm._v(\", from which we originally ported the core logic, runs at a mere 5fps. We've ported that shader to OpenGL, which supports a more modern shading language, in order to hit 60FPS. \")]),_c('p',[_vm._v(\" We wanted to run this project on the web, which is why we ported it to WebGL. However, due to WebGL's limited support for shaders, we wrote our own shader preprocessor in order to add variable-sized arrays to GLSL 1.0 \")]),_c('p',[_vm._v(\" The movie consists of a set of static scenes, which are interpolated to generate fluid motion. \")]),_c('p',[_vm._v(\" As part of our assignment, we first implemented the 2D tracer in C#, after porting the provided template project, removing deprecated OpenGL practices. Next we reimplemented the same ray tracer using OpenGL in a fragment shader. Lastly we ported our OpenGL 3.0 fragment shader to WebGL (which uses OpenGL 1.0 ES). Running the WebGL shader requires NPM and Node, the options are explained in the README. \")]),_c('p',[_vm._v(\" DISCLAIMER: works best on desktop browsers. \")])])}]\n\nexport { render, staticRenderFns }","export default class Shader {\n  gl\n  program\n\n  constructor (gl, vsSource, fsSource, sourceVars) {\n    this.gl = gl\n\n    // preprocess sources\n    vsSource = this.preprocessSource(vsSource, sourceVars)\n    fsSource = this.preprocessSource(fsSource, sourceVars)\n\n    this.program = this.initShaderProgram(gl, vsSource, fsSource)\n  }\n\n  //\n  // Initialize a shader program, so WebGL knows how to draw our data\n  //\n  initShaderProgram (gl, vsSource, fsSource) {\n    const vertexShader = this.loadShader(gl, gl.VERTEX_SHADER, vsSource)\n    const fragmentShader = this.loadShader(gl, gl.FRAGMENT_SHADER, fsSource)\n\n    // Create the shader program\n    const shaderProgram = gl.createProgram()\n    gl.attachShader(shaderProgram, vertexShader)\n    gl.attachShader(shaderProgram, fragmentShader)\n    gl.linkProgram(shaderProgram)\n\n    // If creating the shader program failed, alert\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      alert(`Unable to initialize the shader program: ${gl.getProgramInfoLog(shaderProgram)}`)\n      return null\n    }\n\n    return shaderProgram\n  }\n\n  //\n  // preprocesses our shader source files\n  // it replaces variables in the format 42//$VARIABLE_NAME$// with the VARIABLE_NAME\n  // item from the sourceVars object\n  //\n  preprocessSource (source, sourceVars) {\n    const sourceVarPattern = /42\\/\\/\\$(.*)\\$\\/\\//g\n    return source.replace(sourceVarPattern, (_, varName) => sourceVars[varName])\n  }\n\n  //\n  // creates a shader of the given type, uploads the source and\n  // compiles it.\n  //\n  loadShader (gl, type, source) {\n    const shader = gl.createShader(type)\n\n    // Send the source to the shader object\n    gl.shaderSource(shader, source)\n\n    // Compile the shader program\n    gl.compileShader(shader)\n\n    // See if it compiled successfully\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      console.error(`An error occurred compiling the shaders:\\n${gl.getShaderInfoLog(shader)}`)\n      gl.deleteShader(shader)\n      return null\n    }\n\n    return shader\n  }\n\n  use () {\n    this.gl.useProgram(this.program)\n  }\n\n  setUniform1f (name, value) {\n    this.gl.uniform1f(this.getUniformLocation(name), value)\n  }\n\n  setUniformMatrix4fv (name, value) {\n    this.gl.uniformMatrix4fv(this.getUniformLocation(name), false, value)\n  }\n\n  setUniform2fv (name, value) {\n    this.gl.uniform2fv(this.getUniformLocation(name), value)\n  }\n\n  setUniform3fv (name, value) {\n    this.gl.uniform3fv(this.getUniformLocation(name), value)\n  }\n\n  getUniformLocation (name) {\n    // TODO: Cache uniform locations\n    return this.gl.getUniformLocation(this.program, name)\n  }\n\n  getAttribLocation (name) {\n    // TODO: Cache attrib locations\n    return this.gl.getAttribLocation(this.program, name)\n  }\n\n  delete () {\n    this.gl.deleteProgram(this.program)\n  }\n}\n","export default \"precision highp float;\\n\\n#define M_PI 3.1415926535897932384626433832795\\n\\nvarying mediump vec2 screenPosition;\\n\\nstruct Camera\\n{\\n    vec2 position;\\n    float zoom;\\n} camera = Camera (vec2(0.0, 0.0), 0.5);\\n\\nstruct Ray\\n{\\n    vec2 origin;\\n    vec2 direction;\\n    float magnitude;\\n};\\n\\nstruct Light\\n{\\n    vec2 position;\\n    vec3 color;\\n};\\n\\nstruct Circle\\n{\\n    vec2 position;\\n    float radius;\\n};\\n\\n#define LIGHT_COUNT 42//$LIGHT_COUNT$//\\nuniform Light lights[LIGHT_COUNT];\\n\\n#define CIRCLE_COUNT 42//$CIRCLE_COUNT$//\\nuniform Circle circles[CIRCLE_COUNT];\\n\\n\\n// INTERSECTION CHECKS\\nbool circleIntersects(Circle circle, Ray ray)\\n{\\n    vec2 posToOrigin = ray.origin - circle.position;\\n    float a = dot(ray.direction, ray.direction);\\n    float b = dot(ray.direction, posToOrigin);\\n    float c = dot(posToOrigin, posToOrigin) - (circle.radius * circle.radius);\\n    float d = (b * b) - (a * c);\\n\\n    if (d < 0.0) return false;\\n\\n    float sqrtD = sqrt(d);\\n    float distance = (-b - sqrtD) / a;\\n    if (distance < 0.0) distance = (-b + sqrtD) / a;\\n\\n    return distance > 0.0 && distance < ray.magnitude;\\n}\\n\\nstruct Rectangle {\\n    vec2 lu;\\n    vec2 ru;\\n    vec2 rl;\\n    vec2 ll;\\n};\\n\\nRectangle newRectangle(in vec2 position, float width, float height, float angle) {\\n    vec2 corners[4];\\n    corners[0] = vec2(-width * 0.5, height * 0.5); //lu\\n    corners[1] = vec2(width * 0.5, height * 0.5);  // ru\\n    corners[2] = vec2(width * 0.5, -height * 0.5); // rl\\n    corners[3] = vec2(-width * 0.5, -height * 0.5); // ll\\n\\n    if (angle != 0.0) {\\n        for (int i = 0; i < 4; i++) {\\n            vec2 corner = corners[i];\\n            corners[i] = vec2(\\n            corner.x * cos(angle) - corner.y * sin(angle),\\n            corner.xy * sin(angle) + corner.y * cos(angle)\\n            );\\n        }\\n    }\\n\\n    for (int i = 0; i < 4; i++) {\\n        corners[i] += position;\\n    }\\n\\n    return Rectangle(corners[0], corners[1], corners[2], corners[3]);\\n}\\n\\nstruct RawRect {\\n    vec2 position;\\n    float width;\\n    float height;\\n    float angle;\\n};\\n\\n#define RECTANGLE_COUNT 42//$RECTANGLE_COUNT$//\\nuniform RawRect rectangles[RECTANGLE_COUNT];\\nRectangle rects[RECTANGLE_COUNT];\\nbool lineIntersects(Ray ray, vec2 lineStart, vec2 lineEnd) {\\n    vec2 rayStart = ray.origin;\\n    vec2 rayEnd = ray.origin + ray.direction;\\n\\n    vec2 rayStoLineS = lineStart - rayStart;\\n    vec2 r = ray.direction * ray.magnitude;\\n    vec2 s = lineEnd - lineStart;\\n\\n    float crossR = (rayStoLineS.x * r.y) - (rayStoLineS.y * r.x);\\n    float crossS = (rayStoLineS.x * s.y) - (rayStoLineS.y * s.x);\\n    float rCrossS = r.x * s.y - r.y * s.x;\\n\\n    if (crossR == 0.0) {\\n        return ((lineStart.x - rayStart.x < 0.0) != (lineStart.x - rayEnd.x < 0.0)) ||\\n        ((lineStart.y - rayStart.y < 0.0) != (lineStart.y - rayEnd.y < 0.0));\\n    }\\n\\n    if (rCrossS == 0.0) return false;\\n\\n    float t = crossS / rCrossS;\\n    float u = crossR / rCrossS;\\n\\n    return (t >= 0.0) && (t <= 1.0) && (u >= 0.0) && (u <= 1.0);\\n}\\n\\nbool rectangleIntersect(Ray ray, Rectangle rect) {\\n    return lineIntersects(ray, rect.ll, rect.lu) ||\\n    lineIntersects(ray, rect.lu, rect.ru) ||\\n    lineIntersects(ray, rect.ru, rect.rl) ||\\n    lineIntersects(ray, rect.rl, rect.ll);\\n}\\n\\nvec2 ToWorldSpace(vec2 screenSpacePoint)\\n{\\n    return (screenSpacePoint + camera.position) / camera.zoom;\\n}\\n\\nvec3 Trace(vec2 worldPoint)\\n{\\n    vec3 colorAtPixel = vec3(0.0, 0.0, 0.0);\\n\\n    // Cache the rectangle transformations.\\n    Rectangle rects[RECTANGLE_COUNT];\\n    for (int i = 0; i < RECTANGLE_COUNT; i++) {\\n        RawRect raw = rectangles[i];\\n        rects[i] = newRectangle(raw.position, raw.width, raw.height, raw.angle);\\n    }\\n\\n    for (int i = 0; i < LIGHT_COUNT; i++) {\\n\\n        vec2 vectorToLight = lights[i].position - worldPoint;\\n\\n        // Don't forget to normalize the ray's direction\\n        Ray ray = Ray(worldPoint, vectorToLight, length(vectorToLight));\\n        ray.direction = normalize(ray.direction);\\n\\n        // Check for occlusions between ray\\n        bool occluded = false;\\n        for (int c = 0; c < CIRCLE_COUNT; c++) {\\n            Circle circle = circles[c];\\n            if (circleIntersects(circle, ray)) {\\n                occluded = true;\\n                break;\\n            }\\n        }\\n        if (occluded) continue;\\n\\n        for (int r = 0; r < RECTANGLE_COUNT; r++) {\\n            Rectangle rect = rects[r];\\n            if (rectangleIntersect(ray, rect)) {\\n                occluded = true;\\n                break;\\n            }\\n        }\\n        if (occluded) continue;\\n\\n\\n        float distanceToLight = length(vectorToLight);\\n        float intensity = 1.0 / (4.0 * M_PI * distanceToLight);\\n\\n        colorAtPixel += lights[i].color * intensity;\\n    }\\n\\n\\n    return colorAtPixel;\\n}\\n\\n\\nvoid main() {\\n    gl_FragColor = vec4(Trace(ToWorldSpace(screenPosition)), 1.0);\\n}\\n\";","export default \"precision highp float;\\n\\nattribute vec4 aVertexPosition;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\n\\nvarying mediump vec2 screenPosition;\\n\\nvoid main() {\\n    screenPosition = aVertexPosition.xy;\\n    gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\\n}\\n\";","import { mat4 } from 'gl-matrix'\nimport Shader from './shader'\n\nimport fsSource from './shaders/shader.frag'\nimport vsSource from './shaders/shader.vert'\n\nexport default class Raytracer {\n  gl\n  shader\n  buffers\n\n  constructor (gl, shaderSourceVars) {\n    this.gl = gl\n    this.shader = new Shader(gl, vsSource, fsSource, shaderSourceVars)\n    this.buffers = this.initBuffers()\n  }\n\n  recompileShader (shaderSourceVars) {\n    this.shader.delete()\n    this.shader = new Shader(this.gl, vsSource, fsSource, shaderSourceVars)\n  }\n\n  initBuffers () {\n    // Create a buffer for the square's positions.\n\n    const positionBuffer = this.gl.createBuffer()\n\n    // Select the positionBuffer as the one to apply buffer\n    // operations to from here out.\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, positionBuffer)\n\n    // Now create an array of positions for the square.\n\n    const positions = [\n      -1.0, 1.0,\n      1.0, 1.0,\n      -1.0, -1.0,\n      1.0, -1.0\n    ]\n\n    // Now pass the list of positions into WebGL to build the\n    // shape. We do this by creating a Float32Array from the\n    // JavaScript array, then use it to fill the current buffer.\n    this.gl.bufferData(this.gl.ARRAY_BUFFER,\n      new Float32Array(positions),\n      this.gl.STATIC_DRAW)\n\n    return {\n      position: positionBuffer\n    }\n  }\n\n  drawScene (scene) {\n    this.gl.clearColor(0.0, 0.0, 0.0, 1.0) // Clear to black, fully opaque\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT)\n    this.gl.clearDepth(1.0) // Clear everything\n    this.gl.enable(this.gl.DEPTH_TEST) // Enable depth testing\n    this.gl.depthFunc(this.gl.LEQUAL) // Near things obscure far things\n\n    // Clear the canvas before we start drawing on it.\n\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT)\n\n    // Create a perspective matrix, a special matrix that is\n    // used to simulate the distortion of perspective in a camera.\n    const fieldOfView = 43.5 * Math.PI / 180 // in radians\n    const aspect = this.gl.canvas.clientWidth / this.gl.canvas.clientHeight\n    const zNear = 0.1\n    const zFar = 100.0\n    const projectionMatrix = mat4.create()\n\n    // gl-matrix.js always has the first argument as the destination to receive the result.\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar)\n\n    // Set the drawing position to the \"identity\" point, which is\n    // the center of the scene.\n    const modelViewMatrix = mat4.create()\n\n    // Now move the drawing position a bit to where we want to\n    // start drawing the square.\n    mat4.translate(modelViewMatrix, // destination matrix\n      modelViewMatrix, // matrix to translate\n      [0.0, 0.0, -2.5]) // amount to translate\n\n    // Tell WebGL how to pull out the positions from the position\n    // buffer into the vertexPosition attribute.\n    const vertexPositionLocation = this.shader.getAttribLocation('aVertexPosition')\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffers.position)\n    this.gl.vertexAttribPointer(vertexPositionLocation, 2, this.gl.FLOAT, false, 0, 0)\n    this.gl.enableVertexAttribArray(vertexPositionLocation)\n\n    // Tell WebGL to use our program when drawing\n    this.shader.use()\n\n    this.setLightUniforms(scene)\n    this.setCircleUniforms(scene)\n    this.setRectUniforms(scene)\n\n    // Set the shader uniforms\n    this.shader.setUniformMatrix4fv('uProjectionMatrix', projectionMatrix)\n    this.shader.setUniformMatrix4fv('uModelViewMatrix', modelViewMatrix)\n    {\n      const offset = 0\n      const vertexCount = 4\n      this.gl.drawArrays(this.gl.TRIANGLE_STRIP, offset, vertexCount)\n    }\n  }\n\n  setLightUniforms (scene) {\n    for (const [i, light] of scene.lights.entries()) {\n      this.shader.setUniform2fv(`lights[${i}].position`, new Float32Array(light.position))\n      this.shader.setUniform3fv(`lights[${i}].color`, new Float32Array(light.color))\n    }\n  }\n\n  setCircleUniforms (scene) {\n    for (const [i, circle] of scene.circles.entries()) {\n      this.shader.setUniform2fv(`circles[${i}].position`, new Float32Array(circle.position))\n      this.shader.setUniform1f(`circles[${i}].radius`, circle.radius)\n    }\n  }\n\n  setRectUniforms (scene) {\n    for (const [i, rect] of scene.rectangles.entries()) {\n      this.shader.setUniform2fv(`rectangles[${i}].position`, new Float32Array(rect.position))\n      this.shader.setUniform1f(`rectangles[${i}].width`, rect.width)\n      this.shader.setUniform1f(`rectangles[${i}].height`, rect.height)\n      this.shader.setUniform1f(`rectangles[${i}].angle`, rect.angle)\n    }\n  }\n}\n","import Raytracer from './raytracer'\n\nexport default Raytracer\n","/**\n * @function\n * @description Deep clone a class instance.\n * @param {object} instance The class instance you want to clone.\n * @returns {object} A new cloned instance.\n */\nexport default function clone (instance) {\n  return Object.assign(\n    Object.create(\n      // Set the prototype of the new object to the prototype of the instance.\n      // Used to allow new object behave like class instance.\n      Object.getPrototypeOf(instance)\n    ),\n    // Prevent shallow copies of nested structures like arrays, etc\n    JSON.parse(JSON.stringify(instance))\n  )\n}\n","import clone from '../helpers/clone'\n\nexport default class Scene {\n  lights = [\n    {\n      position: [1, 1],\n      color: [1, 1, 1]\n    }\n  ]\n\n  circles = [\n    {\n      position: [0, 0],\n      radius: 0.1\n    }\n  ]\n\n  rectangles = [\n    {\n      position: [0, 0],\n      width: 0.1,\n      height: 0.1,\n      angle: 0\n    }\n  ]\n\n  duration = 1\n\n  clone () {\n    return clone(this)\n  }\n\n  interpolate (nextScene, t, linear = false) {\n    const interpolatedScene = this.clone()\n\n    if (!linear) { // Ease in and ease out\n      t = (Math.sin((t - 0.5) * Math.PI) + 1) / 2\n    }\n\n    // Interpolated = Current + t(Next-Current)\n    this.lights.forEach((light, i) => {\n      for (const p in interpolatedScene.lights[i].position) {\n        interpolatedScene.lights[i].position[p] =\n          light.position[p] + t * (nextScene.lights[i].position[p] - light.position[p])\n      }\n\n      for (const c in interpolatedScene.lights[i].color) {\n        interpolatedScene.lights[i].color[c] =\n          light.color[c] + t * (nextScene.lights[i].color[c] - light.color[c])\n      }\n    })\n\n    this.circles.forEach((circle, i) => {\n      for (const p in interpolatedScene.circles[i].position) {\n        interpolatedScene.circles[i].position[p] =\n          circle.position[p] + t * (nextScene.circles[i].position[p] - circle.position[p])\n      }\n\n      interpolatedScene.circles[i].radius =\n        circle.radius + t * (nextScene.circles[i].radius - circle.radius)\n    })\n\n    this.rectangles.forEach((rectangle, i) => {\n      for (const p in interpolatedScene.rectangles[i].position) {\n        interpolatedScene.rectangles[i].position[p] =\n          rectangle.position[p] + t * (nextScene.rectangles[i].position[p] - rectangle.position[p])\n      }\n\n      interpolatedScene.rectangles[i].width =\n        rectangle.width + t * (nextScene.rectangles[i].width - rectangle.width)\n\n      interpolatedScene.rectangles[i].height =\n        rectangle.height + t * (nextScene.rectangles[i].height - rectangle.height)\n\n      interpolatedScene.rectangles[i].angle =\n        rectangle.angle + t * (nextScene.rectangles[i].angle - rectangle.angle)\n    })\n\n    return interpolatedScene\n  }\n\n  addLight () {\n    this.lights.push(clone(this.lights[this.lights.length - 1]))\n  }\n\n  addCircle () {\n    this.circles.push(clone(this.circles[this.circles.length - 1]))\n  }\n\n  addRectangle () {\n    this.rectangles.push(clone(this.rectangles[this.rectangles.length - 1]))\n  }\n}\n","import Scene from './scene'\n\nexport default class Movie {\n  id\n  scenes = [new Scene()]\n  shaderSourceVars\n\n  constructor (id, lightCount, circleCount, rectangleCount) {\n    this.id = id\n    this.shaderSourceVars = {\n      LIGHT_COUNT: lightCount,\n      CIRCLE_COUNT: circleCount,\n      RECTANGLE_COUNT: rectangleCount\n    }\n\n    for (let i = 1; i < lightCount; i++) {\n      this.lastScene().addLight()\n    }\n\n    for (let i = 1; i < circleCount; i++) {\n      this.lastScene().addCircle()\n    }\n\n    for (let i = 1; i < rectangleCount; i++) {\n      this.lastScene().addRectangle()\n    }\n  }\n\n  sceneDurations () {\n    return this.scenes.map(s => s.duration)\n  }\n\n  duration () {\n    return this.sceneDurations().reduce((d0, d1) => d0 + d1, 0)\n  }\n\n  lastScene () {\n    return this.scenes[this.scenes.length - 1]\n  }\n\n  addScene () {\n    this.scenes.push(this.lastScene().clone())\n    return this.lastScene()\n  }\n\n  currentScene (time) {\n    const sceneDurations = this.sceneDurations()\n    const sceneCount = this.scenes.length\n\n    time %= this.duration()\n\n    let timeSum = 0\n    let sceneIndex = -1\n    while (timeSum < time) {\n      sceneIndex++\n      timeSum += sceneDurations[sceneIndex]\n      sceneIndex %= sceneCount\n    }\n\n    const scene0 = this.scenes[sceneIndex]\n    const scene1 = sceneIndex + 1 === sceneCount\n      ? this.scenes[0] // go back to scene 0 at the end\n      : this.scenes[sceneIndex + 1] // otherwise, go the the succeeding scene\n\n    const normalizedTime = (time - timeSum + scene0.duration) / scene0.duration\n    return scene0.interpolate(scene1, normalizedTime)\n  }\n}\n","import Movie from '../movie'\n\nexport default function rectangleMovie () {\n  const m = new Movie('Rectangle Movie', 2, 1, 9)\n  let s = m.lastScene()\n\n  const brightness = 2\n\n  s.lights[0].position = [1, 1]\n  s.lights[0].color = [brightness, 0, brightness]\n\n  s.lights[1].position = [-1, 0]\n  s.lights[1].color = [0, 0, 0]\n\n  s.circles[0].radius = 0\n\n  const spacing = 0.4\n  const sideDimension = 0.2\n\n  const combinedWidth = spacing * 3 - sideDimension\n\n  for (let i = 0; i < 9; i++) {\n    const x = i % 3\n    const y = ~~(i / 3)\n\n    s.rectangles[i].width = 0\n    s.rectangles[i].height = 0\n    s.rectangles[i].position[0] = spacing * x - spacing\n    s.rectangles[i].position[1] = spacing * y - spacing\n  }\n\n  s.rectangles[4].width = combinedWidth\n  s.rectangles[4].height = combinedWidth\n\n  s = m.addScene()\n  s.lights[0].position[1] = -1\n\n  s = m.addScene()\n  s.lights[0].position[0] = -1\n\n  // combine rects for split\n  s.rectangles[1].width = combinedWidth\n  s.rectangles[1].height = sideDimension\n\n  s.rectangles[7].width = combinedWidth\n  s.rectangles[7].height = sideDimension\n\n  s = m.addScene()\n  s.lights[0].position[1] = 0\n\n  s = m.addScene()\n  s.rectangles[4].height = sideDimension\n\n  s = m.addScene()\n  s.lights[0].color = [brightness, 0, 0]\n  s.lights[1].color = [0, 0, brightness]\n\n  s = m.addScene()\n  s.lights[0].position[1] = spacing / 4\n  s.lights[1].position[1] = -spacing / 4\n\n  s = m.addScene()\n  s.lights[0].position[1] = spacing / 2\n  s.lights[1].position[1] = -spacing / 2\n\n  s = m.addScene()\n  s.lights[0].position[0] = 1\n\n  s = m.addScene()\n  s.lights[1].position[0] = -1\n\n  s = m.addScene()\n  s.lights[1].position[0] = 1\n  s.lights[1].position[0] = -1\n\n  const pointBetweenRects = spacing / 2\n  s = m.addScene()\n  s.lights[0].position[0] = pointBetweenRects\n  s.lights[1].position[0] = -pointBetweenRects\n\n  for (const i of [0, 2, 3, 5, 6, 8]) {\n    s.rectangles[i].width = sideDimension\n    s.rectangles[i].height = sideDimension\n  }\n\n  s = m.addScene()\n  s.duration = 3\n  for (const i of [1, 4, 7]) {\n    s.rectangles[i].width = sideDimension\n    s.rectangles[i].height = sideDimension\n  }\n\n  s = m.addScene()\n  s.rectangles[4].angle = 3 * Math.PI\n  s.duration = 0.5\n\n  s = m.addScene()\n  s.lights[0].position[1] = -pointBetweenRects\n  s.lights[1].position[1] = pointBetweenRects\n\n  s = m.addScene()\n  s.lights[0].position[0] = -pointBetweenRects\n  s.lights[1].position[0] = pointBetweenRects\n  s.duration = 1\n\n  s = m.addScene()\n  s.lights[0].position[1] = 1\n  s.lights[1].position[1] = -1\n\n  s = m.addScene()\n  s.lights[0].position[1] = -1\n  s.lights[1].position[1] = 1\n\n  s = m.addScene()\n  s.lights[0].position[1] = pointBetweenRects\n  s.lights[1].position[1] = -pointBetweenRects\n\n  s = m.addScene()\n  s.lights[0].position[1] = 1\n  s.lights[1].position[1] = 1\n  s.duration = 0.5\n\n  s = m.addScene()\n  s.lights[0].position[0] = -pointBetweenRects / 2\n  s.lights[1].position[0] = pointBetweenRects / 2\n\n  s = m.addScene()\n  s.lights[0].position[0] = 0\n  s.lights[1].position[0] = 0\n  s.duration = 1\n\n  s.rectangles[4].width = combinedWidth\n  s.rectangles[4].height = combinedWidth\n\n  s = m.addScene()\n  s.lights[0].color = [2, 0, 2]\n  s.lights[1].color = [0, 0, 0]\n  for (const i of [0, 1, 2, 3, 5, 6, 7, 8]) {\n    s.rectangles[i].width = 0\n    s.rectangles[i].height = 0\n  }\n  s.duration = 2\n\n  return m\n}\n","import Movie from '../movie'\n\nexport default function circleMovie () {\n  const m = new Movie('Circle Movie', 4, 9, 1)\n\n  // Setup inital scene\n  let s = m.lastScene()\n  s.rectangles[0].width = 0\n  s.rectangles[0].height = 0\n  s.rectangles[0].position = [-10, 0]\n  s.addCircle()\n\n  s.lights[0].position = [-2.5, 2.5]\n  s.lights[0].color = [0, 0, 0]\n  s.lights[1].position = [0, 0]\n  s.lights[2].position = [0, 0]\n  s.lights[3].position = [0, 0]\n  s.lights[1].color = [0, 0, 0]\n  s.lights[2].color = [0, 0, 0]\n  s.lights[3].color = [0, 0, 0]\n\n  s = m.addScene()\n  s.lights[0].color = [2, 2, 2]\n  s.duration = 2\n\n  s = m.addScene()\n\n  s = m.addScene()\n  s.lights[0].position = [-0.5, 0.5]\n  s.duration = 0.5\n\n  s = m.addScene()\n\n  s = m.addScene()\n  s.lights[0].position = [0.5, 0.5]\n  s.lights[0].color = [2, 0, 0]\n\n  s = m.addScene()\n  s.lights[0].position = [0.5, -0.5]\n  s.lights[0].color = [1, 1, 0]\n\n  s = m.addScene()\n  s.lights[0].position = [-0.5, -0.5]\n  s.lights[0].color = [0, 2, 0]\n\n  s = m.addScene()\n  s.lights[0].position = [-0.5, 0.5]\n  s.lights[0].color = [0, 0, 2]\n\n  s = m.addScene()\n  s.lights[0].color = [2, 1, 3]\n  s.duration = 2\n\n  s = m.addScene()\n  s.circles[0].position = [-1, -1]\n  s.circles[1].position = [1, 1]\n  s.circles[2].position = [1, -1]\n  s.circles[3].position = [1, -1]\n  s.circles[4].position = [1, -1]\n  s.circles[5].position = [1, -1]\n  s.circles[6].position = [1, -1]\n  s.circles[7].position = [1, -1]\n  s.circles[8].position = [1, -1]\n\n  s.lights[0].position = [0, 0]\n\n  s = m.addScene()\n  s.circles[0].radius = 0.4\n  s.circles[1].radius = 0.5\n  s.lights[0].color = [9, 4, 8]\n  s.circles[3].position = [1, 0]\n  s.circles[4].position = [0, -1]\n\n  s = m.addScene()\n  s.circles[0].radius = 0.2\n  s.circles[1].radius = 0.2\n  s.circles[3].radius = 0.15\n  s.circles[4].radius = 0.15\n\n  s = m.addScene()\n  s.lights[0].color = [1, 1, 4]\n\n  s = m.addScene()\n  s.lights[1].color = [9, 4, 8]\n\n  s = m.addScene()\n  s.lights[1].position = [0, 1.8]\n  s.duration = 1\n\n  s = m.addScene()\n  s.lights[1].position = [1.8, 1.8]\n\n  s = m.addScene()\n  s.lights[1].position = [1.8, -1.8]\n\n  s = m.addScene()\n  s.lights[1].position = [-1.8, -1.8]\n\n  s = m.addScene()\n  s.lights[1].position = [-1.8, 0]\n\n  s = m.addScene()\n  s.lights[1].position = [0, 0]\n\n  s = m.addScene()\n  s.circles[0].radius = 0.1\n  s.circles[1].radius = 0.1\n  s.circles[2].radius = 0.1\n  s.circles[3].radius = 0.1\n  s.circles[4].radius = 0.1\n\n  s = m.addScene()\n  s.circles[5].position = [1, 0.5]\n  s.circles[6].position = [1, -0.5]\n  s.circles[7].position = [0.5, -1]\n  s.circles[8].position = [-0.5, -1]\n\n  s = m.addScene()\n  s.lights[0].color = [0, 0, 0]\n  s.lights[1].color = [0, 0, 0]\n  s.lights[2].color = [0, 0, 0]\n  s.lights[3].color = [0, 0, 0]\n\n  s = m.addScene()\n  s.lights[0].position = [1.8, 0.7]\n  s.lights[1].position = [1.8, -0.7]\n  s.lights[2].position = [0.7, -1.8]\n  s.lights[3].position = [-0.7, -1.8]\n  s.duration = 0.5\n\n  s = m.addScene()\n  s.lights[0].color = [0, 2, 0]\n\n  s = m.addScene()\n  s.lights[0].color = [0, 0, 0]\n  s.lights[1].color = [0, 2, 0]\n\n  s = m.addScene()\n  s.lights[1].color = [0, 0, 0]\n  s.lights[2].color = [0, 2, 0]\n\n  s = m.addScene()\n  s.lights[2].color = [0, 0, 0]\n  s.lights[3].color = [0, 2, 0]\n\n  s = m.addScene()\n  s.lights[3].color = [0, 0, 0]\n\n  s = m.addScene()\n  s.lights[0].color = [0, 2, 0]\n  s.lights[1].color = [0, 2, 0]\n  s.lights[2].color = [0, 2, 0]\n  s.lights[3].color = [0, 2, 0]\n  s.duration = 3\n\n  s = m.addScene()\n  s.lights[0].position = [1.8, -1.8]\n  s.lights[1].position = [1.8, -1.8]\n  s.lights[2].position = [1.8, -1.8]\n  s.lights[3].position = [1.8, -1.8]\n\n  s = m.addScene()\n  s.lights[0].position = [5, -5]\n  s.lights[1].position = [5, -5]\n  s.lights[2].position = [5, -5]\n  s.lights[3].position = [5, -5]\n\n  s = m.addScene()\n  s.duration = 1\n  s.lights[0].position = [-2.5, 2.5]\n  s.lights[1].position = [-2.5, 2.5]\n  s.lights[2].position = [-2.5, 2.5]\n  s.lights[3].position = [-2.5, 2.5]\n  s.lights[0].color = [0, 0, 0]\n  s.lights[1].color = [0, 0, 0]\n  s.lights[2].color = [0, 0, 0]\n  s.lights[3].color = [0, 0, 0]\n\n  return m\n}\n","<template>\n  <div class=\"home\">\n    <h1>INFOGR Raytracer WebGL</h1>\n    <h2><a href=\"https://github.com/cor\">cor</a> & <a href=\"https://github.com/kaiserkarel\">kaiserkarel</a></h2>\n    <div class=\"tablink-container\">\n      <router-link\n        class=\"tablink\"\n        v-for=\"(movie, index) in movies\" :key=\"movie.id\"\n        :to=\"{name: 'Movie', params: {id: index}}\"\n      >{{movie.id}}</router-link>\n    </div>\n    <canvas id=\"glCanvas\" width=\"800\" height=\"800\"></canvas>\n\n    <div class=\"description\">\n      <p>\n        Above you will find two movies; which are actively ray traced withn a WebGL fragment shader. The tracer operates in two dimensions, shooting a ray at each pixel every single frame. WebGL is easily capable of performing this operation at 60fps, as opposed to traditional CPU implementations. Our CPU-based <a href=\"https://github.com/cor/infogr-raytracer\">C# version</a>, from which we originally ported the core logic, runs at a mere 5fps. We've ported that shader to OpenGL, which supports a more modern shading language, in order to hit 60FPS.\n      </p>\n      <p>\n        We wanted to run this project on the web, which is why we ported it to WebGL. However, due to WebGL's limited support for shaders, we wrote our own shader preprocessor in order to add variable-sized arrays to GLSL 1.0\n      </p>\n      <p>\n        The movie consists of a set of static scenes, which are interpolated to generate fluid motion.\n      </p>\n      <p>\n        As part of our assignment, we first implemented the 2D tracer in C#, after porting the provided template project, removing deprecated OpenGL practices. Next we reimplemented the same ray tracer using OpenGL in a fragment shader. Lastly we ported our OpenGL 3.0 fragment shader to WebGL (which uses OpenGL 1.0 ES). Running the WebGL shader requires NPM and Node, the options are explained in the README.\n      </p>\n\n      <p>\n        DISCLAIMER: works best on desktop browsers.\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Raytracer from '../raytracer'\n\nimport rectangleMovie from '../raytracer/movies/rectangle-movie.js'\nimport circleMovie from '../raytracer/movies/circle-movie.js'\n\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      frameId: null,\n      startTime: 0,\n      raytracer: null,\n      movies: [circleMovie(), rectangleMovie()]\n    }\n  },\n\n  watch: {\n    $route (to, from) {\n      this.playMovie(this.movies[this.id || 0])\n    }\n  },\n\n  props: {\n    id: Number\n  },\n\n  methods: {\n    playMovie (movie) {\n      if (this.frameId !== null) {\n        cancelAnimationFrame(this.frameId)\n      }\n\n      this.startTime = null\n\n      const canvas = document.querySelector('#glCanvas')\n      const gl = canvas.getContext('webgl')\n\n      // Notify users of browsers that do not support WebGL\n      if (gl === null) {\n        alert('Unable to initialize WebGL. Your browser or machine may not support it.')\n      }\n\n      this.raytracer = new Raytracer(gl, movie.shaderSourceVars)\n\n      const render = (now) => {\n        now *= 0.001 // convert to seconds\n        if (this.startTime === null) {\n          this.startTime = now\n        }\n\n        const time = 0.0001 + now - this.startTime\n        this.raytracer.drawScene(movie.currentScene(time))\n        this.frameId = requestAnimationFrame(render)\n      }\n      this.frameId = requestAnimationFrame(render)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n  $gray: #111;\n  $dark-gray: #222;\n  $border-width: 4px;\n  $highlight-color: #806f69;\n\n  .home {\n    text-align: center;\n  }\n  h1 {\n    margin-bottom: 0;\n  }\n  h2 {\n    margin: 0 8px 16px 8px;\n    font-size: 20px;\n    a {\n      color: inherit;\n      &:visited {\n        color: inherit;\n      }\n    }\n  }\n\n  /* Style tab links */\n  .tablink {\n    border-radius: 16px 16px 0 0;\n    background-color: $gray;\n    color: inherit;\n    text-decoration: none;\n    font-weight: bold;\n    float: left;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    padding: 14px 16px;\n    font-size: 17px;\n    /*width: 400px;*/\n    flex: 1;\n    border: solid $dark-gray;\n    border-width: $border-width;\n\n    &.router-link-active {\n      border-color: $highlight-color;\n      border-bottom-color: $gray;\n    }\n    &:not(.router-link-active) {\n      border-bottom-color: $highlight-color;\n\n      &:hover {\n        border-color: $highlight-color;\n      }\n    }\n  }\n\n  .tablink-container {\n    display: flex;\n    width: 800px + 2 * $border-width;\n    margin: 0 auto;\n  }\n\n  canvas {\n    border: solid $highlight-color;\n    border-width: 0 $border-width $border-width $border-width;\n  }\n\n  .description {\n    width: 800px;\n    text-align: left;\n    margin: 0 auto;\n    font-weight: bold;\n\n    a {\n      color: inherit;\n      font-weight: bolder;\n    }\n  }\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=4582f61b&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../views/Home.vue'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    redirect: '/movie/0',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/movie/:id',\n    name: 'Movie',\n    component: Home,\n    props (route) {\n      const props = { ...route.params }\n      props.id = +props.id\n      return props\n    }\n  },\n  {\n    path: '/about',\n    name: 'About',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue')\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n  },\n  mutations: {\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue'\nimport App from './App.vue'\nimport './registerServiceWorker'\nimport router from './router'\nimport store from './store'\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}